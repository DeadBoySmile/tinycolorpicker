/*! tinycolorpicker - v0.1.0 - 2015-01-20
 * http://www.baijs.com/tinycolorpicker
 *
 * Copyright (c) 2015 Maarten Baijs <wieringen@gmail.com>;
 * Licensed under the MIT license */

!function(a){"use strict";function b(b,e){function f(){return r&&(n=document.createElement("canvas"),k.appendChild(n),p=n.getContext("2d"),g()),h(),j}function g(){var b=new Image,c=k.currentStyle||a.getComputedStyle(k,!1),d=c.backgroundImage.replace(/"/g,"").replace(/url\(|\)$/gi,"");k.style.backgroundImage="none",b.onload=function(){n.width=this.width,n.height=this.height,p.drawImage(b,0,0,this.width,this.height)},b.src=j.options.backgroundUrl||d}function h(){var a=s?"touchstart":"mousedown";r&&(l["on"+a]=function(a){a.preventDefault(),a.stopPropagation(),k.style.display="block",document.onmousedown=function(){document.onmousedown=null,k.style.display="none"}},s?(n.ontouchstart=function(a){return q=!0,i(a.originalEvent.touches[0]),!1},n.ontouchmove=function(a){return i(a.originalEvent.touches[0]),!1},n.ontouchend=function(){return q=!1,k.style.display="none",!1}):(n.onmousedown=function(a){a.preventDefault(),a.stopPropagation(),q=!0,i(a),document.onmouseup=function(){return q=!1,document.onmouseup=null,k.style.display="none",!1}},n.onmousemove=i))}function i(a){if(q){var c=a.target.getBoundingClientRect(),d=p.getImageData(a.clientX-c.left,a.clientY-c.top,1,1).data;j.setColor("rgb("+d[0]+","+d[1]+","+d[2]+")"),b.dispatchEvent(t,[j.colorHex,j.colorRGB])}}this.options=$.extend({},d,e),this._defaults=d,this._name=c;var j=this,k=b.querySelectorAll(".track")[0],l=b.querySelectorAll(".color")[0],m=b.querySelectorAll(".colorInner")[0],n=null,o=b.querySelectorAll(".colorInput")[0],p=null,q=!1,r=!!document.createElement("canvas").getContext,s="ontouchstart"in document.documentElement,t=document.createEvent("HTMLEvents");return t.initEvent("change",!0,!0),this.colorHex="",this.colorRGB="",this.setColor=function(a){a.indexOf("#")>=0?(j.colorHex=a,j.colorRGB=j.hexToRgb(j.colorHex)):(j.colorRGB=a,j.colorHex=j.rgbToHex(j.colorRGB)),m.style.backgroundColor=j.colorHex,o.value=j.colorHex},this.hexToRgb=function(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return"rgb("+parseInt(b[1],16)+","+parseInt(b[2],16)+","+parseInt(b[3],16)+")"},this.rgbToHex=function(a){function b(a){var b=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F");return isNaN(a)?"00":b[(a-a%16)/16]+b[a%16]}var c=a.match(/\d+/g);return"#"+b(c[0])+b(c[1])+b(c[2])},f()}var c="tinycolorpicker",d={backgroundUrl:null},e=function(a,c){return new b(a,c)};"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof module&&module.exports?module.exports=e:a.tinycolorpicker=e}(window);